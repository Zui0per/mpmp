#!/usr/local/plan9/bin/rc
# oki's cheap IDE replacement. I could use mk instead, but this seems easy enough.

echo Building mpmp...
cd mpmp
mkdir -p bin
javac -d bin `{du -a src | awk '{print $2}' | grep \.java }
cd bin
jar cfe mpmp.jar main.Main `{du -a | awk '{print $2}' | grep \.class }
cd ../..
mv mpmp/bin/mpmp.jar .

echo Building mpmp-launcher...
cd mpmp-launcher
mkdir -p bin
javac -d bin `{du -a src | awk '{print $2}' | grep \.java }
cd bin
jar cfe mpmp-launcher.jar main.Main `{du -a | awk '{print $2}' | grep \.class } -C ../src res/logo_small.png -C ../src res/monopoly.ttf
cd ../..
mv mpmp-launcher/bin/mpmp-launcher.jar .

echo Building mpmp-client...
cd mpmp-client
mkdir -p bin
javac -classpath lib/*:. -d bin `{du -a src | awk '{print $2}' | grep \.java }
cd bin
jar cfem mpmp-client.jar view ../../scripts/client-manifest `{du -a | awk '{print $2}' | grep \.class } -C ../src res/SourceSansPro-Light.ttf
cd ../..
mv mpmp-client/bin/mpmp-client.jar .
